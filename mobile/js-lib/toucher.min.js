/*
剧中人
https://github.com/bh-lay/toucher
toucher
*/
!function (t, e, n) { var i = n(t, e); t.util = t.util || {}, t.util.toucher = t.util.toucher || i, t.define && define(function (t, e, n) { return i }) }(this, document, function (t, e) { function n(t, e) { return t.className.match(new RegExp("(\\s|^)" + e + "(\\s|$)")) } function i(t, e) { var i, o, s, r, u, l, c; if (this._events = this._events || {}, this._events[t]) for (i = this._events[t], o = e.target; ;) { if (0 == i.length) return; if (o == this.dom || !o) { for (s = 0, r = i.length; r > s; s++) u = i[s].className, l = i[s].fn, null == u && a(t, l, o, e); return } for (c = i, i = [], s = 0, r = c.length; r > s; s++) if (u = c[s].className, l = c[s].fn, n(o, u)) { if (0 == a(t, l, o, e)) return } else i.push(c[s]); o = o.parentNode } } function a(t, e, n, i) { var a, o = i.plugTouches || i.touches, s = o.length ? o[0] : {}, r = { type: t, target: i.target, pageX: s.pageX, pageY: s.pageY, clientX: s.clientX || 0, clientY: s.clientY || 0 }; return t.match(/^swipe/) && i.plugStartPosition && (r.startX = i.plugStartPosition.pageX, r.startY = i.plugStartPosition.pageY, r.moveX = r.pageX - r.startX, r.moveY = r.pageY - r.startY), a = e.call(n, r), 0 == a && (i.preventDefault(), i.stopPropagation()), a } function o(t, e, n, i) { return Math.abs(t - e) >= Math.abs(n - i) ? t - e > 0 ? "Left" : "Right" : n - i > 0 ? "Up" : "Down" } function s(t) { function e(t) { m = !1, clearTimeout(f), clearTimeout(h) } function n() { e(), i.call(g, "singleTap", E) } function a(t) { E = t, u = t.touches[0].pageX, l = t.touches[0].pageY, c = 0, p = 0, m = !0, d = new Date, i.call(g, "swipeStart", t), clearTimeout(f), f = setTimeout(function () { e(t), i.call(g, "longTap", t) }, 500) } function s(t) { if (t.plugStartPosition = E.plugStartPosition, t.plugTouches = E.touches, i.call(g, "swipeEnd", t), m) { var a = new Date; g._events.doubleTap && 0 != g._events.doubleTap.length ? a - v > 200 ? h = setTimeout(n, 190) : (clearTimeout(h), e(t), i.call(g, "doubleTap", E)) : n(), v = a } } function r(t) { if (E = t, t.plugStartPosition = { pageX: u, pageY: l }, i.call(g, "swipe", t), m) { if (c = t.touches[0].pageX, p = t.touches[0].pageY, Math.abs(u - c) > 2 || Math.abs(l - p) > 2) { var a = o(u, c, l, p); i.call(g, "swipe" + a, t) } else n(); e(t) } } var u, l, c, p, h, f, g = this, d = 0, v = 0, m = !1, E = null; t.addEventListener("touchstart", a), t.addEventListener("MSPointerDown", a), t.addEventListener("pointerdown", a), t.addEventListener("touchend", s), t.addEventListener("MSPointerUp", s), t.addEventListener("pointerup", s), t.addEventListener("touchmove", r), t.addEventListener("MSPointerMove", r), t.addEventListener("pointermove", r), t.addEventListener("touchcancel", e), t.addEventListener("MSPointerCancel", e), t.addEventListener("pointercancel", e) } function r(t, e) { this.dom = t, this._events = {}, s.call(this, this.dom) } return r.prototype.on = function (t, e, n) { var i, a, o, s, r, u; if ("string" == typeof e ? (i = e.replace(/^\./, ""), a = n) : (i = null, a = e), "function" == typeof a && t && t.length) for (o = t.split(/\s+/), s = 0, r = o.length; r > s; s++) u = o[s], this._events[u] || (this._events[u] = []), this._events[u].push({ className: i, fn: a }); return this }, function (t) { return new r(t) } });